# TUI 使い方

## 起動

```bash
dandori tui
```

## 画面構成

- **ヘッダー**: タイトルと現在のフィルタ状態を表示
- **リストビュー（左半分）**: タスク一覧
- **詳細ビュー（右半分）**: 選択中のタスクの詳細情報
- **フッター**: 操作結果やエラーメッセージを表示

## 基本操作

### 終了

- `q` / `Q`: アプリケーションを終了

### カーソル移動

- `↑` / `↓`: タスク一覧で上下に移動
- `Home`: 先頭（ダミー行）に移動
- `End`: 末尾に移動
- `PageUp` / `PageDown`: ページ単位で移動

### 詳細表示のスクロール

- `[`: 詳細表示を上にスクロール（3行）
- `]`: 詳細表示を下にスクロール（3行）

## フィルタ

### ステータスフィルタ (`f`)

ステータスフィルタを循環切り替え：

- `all` → `pending` → `in_progress` → `done` → `requested` → `all`

### アーカイブフィルタ (`a`)

アーカイブ状態でフィルタを循環切り替え：

- `active` → `archived` → `all` → `active`

### リクエストフィルタ (`r`)

`requested` ステータスのタスクのみ表示するフィルタをトグル

### トポロジカルソート (`t`)

依存関係に基づくトポロジカル順での表示をトグル

## タスク操作

### タスクの追加

- `A`: 新しいタスクを追加（現在選択中のタスクの子として追加）
- `Enter`: ダミー行（先頭行）で `Enter` を押すとルートタスクを追加

追加ダイアログで入力可能な項目：

- Title（必須）
- Priority (0-9)
- Start Date (ISO形式)
- Due Date (ISO形式)
- Tags (カンマ区切り)
- Description

### タスクの編集

- `E`: 現在選択中のタスクを編集

編集ダイアログで変更可能な項目：

- Title（必須）
- Priority
- Start Date
- Due Date
- Tags
- Description

### ステータス変更

- `p`: ステータスを `pending` に変更
- `i`: ステータスを `in_progress` に変更
- `d`: ステータスを `done` に変更

### アーカイブ

- `x`: 現在選択中のタスクを含む連結成分（ツリー）をアーカイブ
- `u`: 現在選択中のタスクを含む連結成分（ツリー）をアーカイブ解除

### リクエスト

- `R`: 現在選択中のタスクを依頼状態にする

リクエストダイアログで入力可能な項目：

- Assignee: 担当者名
- Note: メモ

## 表示

### グラフ表示 (`G`)

現在選択中のタスクの依存関係（deps/children）をオーバーレイで表示

- `ESC`: オーバーレイを閉じる

## ダイアログ操作

ダイアログ表示中：

- `Tab` / `↓`: 次のフィールドに移動
- `↑`: 前のフィールドに移動
- `Enter`: 適用してダイアログを閉じる
- `ESC`: キャンセルしてダイアログを閉じる
- `←` / `→`: カーソルを左右に移動
- `Home` / `End`: カーソルを行頭/行末に移動
- `Backspace` / `Delete`: 文字削除
- 通常の文字入力: テキスト入力

## タスク一覧の表示

各タスク行には以下の情報が表示されます：

- **ステータスマーク**: `-` (pending), `I` (in_progress), `D` (done), `R` (requested), `X` (removed), `A` (archived)
- **タスクID**: 先頭6文字
- **タイトル**

色分け：

- **オレンジ**: ダミー行（タスク追加用）
- **緑**: 完了済み (`done`)
- **赤**: 依頼済み (`requested`)
- **グレー**: アーカイブ済み
- **青**: 作業中 (`in_progress`)
- **白**: 待機中 (`pending`)

選択中の行は反転表示されます。

## 詳細表示

選択中のタスクの詳細情報を右側に表示：

- ID
- Title
- Status（アーカイブ状態も表示）
- Priority
- Start Date（設定されている場合）
- Due Date（設定されている場合）
- Tags（設定されている場合）
- Depends on（依存しているタスクID）
- Children（子タスクID）
- Description（設定されている場合）

詳細が長い場合は `[` / `]` キーでスクロールできます。
